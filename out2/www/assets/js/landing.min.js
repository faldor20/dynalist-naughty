"use strict";
!(function () {
  var n = (function () {
    function t() {
      (this.body = document.querySelector("body")),
        this.body.on(
          "mouseover",
          "[aria-label]",
          this.onDisplayTooltip.bind(this),
        ),
        this.body.on("mouseout", "[aria-label]", this.onMouseOut.bind(this)),
        this.body.addEventListener("click", this.hideTooltip.bind(this));
    }
    return (
      (t.prototype.displayTooltip = function (t, e, n, o, i) {
        if (this.parentEl !== t) {
          this.hideTooltip();
          var r = t.getBoundingClientRect(),
            s = r.top,
            a = r.left,
            c = r.width,
            u = r.height;
          void 0 === i && (i = 8);
          var l,
            p,
            h = createEl("div", { cls: "tooltip", text: e }),
            f = h.createEl("div", { cls: "tooltip-arrow" }),
            d = o || [];
          "bottom" === n
            ? ((l = s + u + i), (p = a + c / 2))
            : "right" === n
            ? ((l = s + u / 2), (p = a + c + i), d.push("mod-right"))
            : "left" === n
            ? ((l = s + u / 2), (p = a - i), d.push("mod-left"))
            : "top" === n &&
              ((l = s - i - 5), (p = a + c / 2), d.push("mod-top")),
            h.addClasses(d),
            (h.style.top = "0px"),
            (h.style.left = "0px"),
            (h.style.width = ""),
            (h.style.height = ""),
            this.body.appendChild(h);
          var g = h.getBoundingClientRect(),
            y = ["bottom", "top"].contains(n) ? g.width / 2 : g.width,
            _ = "right" === n || "left" === n ? g.height / 2 : g.height;
          if (
            ("left" === n ? (p -= y) : "top" === n && (l -= _),
            l + _ > window.innerHeight && (l = window.innerHeight - _ - i),
            (l = Math.max(l, i)),
            "top" === n || "bottom" === n)
          ) {
            if (p + y > window.innerWidth)
              (p -= m = p + y + i - window.innerWidth),
                (f.style.left = "initial"),
                (f.style.right = y - m - i / 2 + "px");
            else if (p - i - y < 0) {
              var m;
              (p += m = -(p - i - y)),
                (f.style.right = "initial"),
                (f.style.left = y - m - i / 2 + "px");
            }
            p = Math.max(p, i);
          }
          (h.style.top = l + "px"),
            (h.style.left = p + "px"),
            (h.style.width = g.width + "px"),
            (h.style.height = g.height + "px"),
            (this.tooltipEl = h),
            (this.parentEl = t);
        }
      }),
      (t.prototype.onDisplayTooltip = function (t, e) {
        var n = e.getAttribute("aria-label"),
          o = "bottom",
          i = [];
        e.hasAttribute("aria-label-position") &&
          (o = e.getAttribute("aria-label-position")),
          e.hasAttribute("aria-label-classes") &&
            (i = e.getAttribute("aria-label-classes").split(" ")),
          this.displayTooltip(e, n, o, i);
      }),
      (t.prototype.onMouseOut = function (t, e) {
        var n = t.relatedTarget;
        (n instanceof Node && e.contains(n)) || this.hideTooltip();
      }),
      (t.prototype.hideTooltip = function () {
        this.tooltipEl &&
          (this.tooltipEl.detach(),
          (this.tooltipEl = null),
          (this.parentEl = null));
      }),
      t
    );
  })();
  Function.prototype.bind ||
    (Function.prototype.bind = function (t) {
      if ("function" != typeof this)
        throw new TypeError(
          "Function.prototype.bind - what is trying to be bound is not callable",
        );
      var e = Array.prototype.slice.call(arguments, 1),
        n = this,
        o = function () {},
        i = function () {
          return n.apply(
            this instanceof o ? this : t,
            e.concat(Array.prototype.slice.call(arguments)),
          );
        };
      return (
        this.prototype && (o.prototype = this.prototype),
        (i.prototype = new o()),
        i
      );
    }),
    Array.prototype.every ||
      (Array.prototype.every = function (t, e) {
        var n, o;
        if (null == this) throw new TypeError("this is null or not defined");
        var i = Object(this),
          r = i.length >>> 0;
        if ("function" != typeof t) throw new TypeError();
        for (1 < arguments.length && (n = e), o = 0; o < r; ) {
          var s = void 0;
          if (o in i) if (((s = i[o]), !t.call(n, s, o, i))) return !1;
          o++;
        }
        return !0;
      }),
    Array.prototype.some ||
      (Array.prototype.some = function (t) {
        if (null == this)
          throw new TypeError(
            "Array.prototype.some called on null or undefined",
          );
        if ("function" != typeof t) throw new TypeError();
        for (
          var e = Object(this),
            n = e.length >>> 0,
            o = 2 <= arguments.length ? arguments[1] : void 0,
            i = 0;
          i < n;
          i++
        )
          if (i in e && t.call(o, e[i], i, e)) return !0;
        return !1;
      }),
    Array.prototype.clone ||
      (Array.prototype.clone = function () {
        return this.slice(0);
      }),
    Array.prototype.cloneInline ||
      (Array.prototype.cloneInline = function () {
        for (var t = new Array(this.length), e = 0; e < this.length; e++)
          t[e] = this[e];
        return t;
      }),
    Array.prototype.first ||
      (Array.prototype.first = function () {
        return 0 === this.length ? null : this[0];
      }),
    Array.prototype.last ||
      (Array.prototype.last = function () {
        return 0 === this.length ? null : this[this.length - 1];
      }),
    Array.prototype.peek || (Array.prototype.peek = Array.prototype.last),
    Array.prototype.contains ||
      (Array.prototype.contains = function (t) {
        return -1 !== this.indexOf(t);
      }),
    Array.prototype.remove ||
      (Array.prototype.remove = function (t) {
        for (var e = this.length - 1; 0 <= e; e--)
          this[e] === t && this.splice(e, 1);
      }),
    Array.isArray ||
      (Array.isArray = function (t) {
        return "[object Array]" === Object.prototype.toString.call(t);
      }),
    Array.each ||
      ((Array.each = function (t, e, n) {
        for (var o = 0; o < t.length; o++)
          if (!1 === e.call(n, t[o], o, t)) return !1;
        return !0;
      }),
      (Array.eachReverse = function (t, e, n) {
        for (var o = t.length - 1; 0 <= o; o--)
          if (!1 === e.call(n, t[o], o, t)) return !1;
        return !0;
      })),
    Object.isEmpty ||
      (Object.isEmpty = function (t) {
        for (var e in t) if (t.hasOwnProperty(e)) return !1;
        return !0;
      }),
    Object.each ||
      (Object.each = function (t, e, n) {
        for (var o in t)
          if (t.hasOwnProperty(o) && !1 === e.call(n, t[o], o)) return !1;
        return !0;
      }),
    Object.getOrCreate ||
      (Object.getOrCreate = function (t, e, n) {
        var o = t[e];
        return o || ((o = n(e)), (t[e] = o)), o;
      }),
    "function" != typeof Object.assign &&
      Object.defineProperty(Object, "assign", {
        value: function t(e) {
          if (null == e)
            throw new TypeError("Cannot convert undefined or null to object");
          for (var n = Object(e), o = 1; o < arguments.length; o++) {
            var i = arguments[o];
            if (null != i)
              for (var r in i)
                Object.prototype.hasOwnProperty.call(i, r) && (n[r] = i[r]);
          }
          return n;
        },
        writable: !0,
        configurable: !0,
      }),
    String.isString ||
      (String.isString = function (t) {
        return "string" == typeof t || t instanceof String;
      }),
    String.prototype.contains ||
      (String.prototype.contains = function (t) {
        return -1 !== this.indexOf(t);
      }),
    String.prototype.startsWith ||
      (String.prototype.startsWith = function (t, e) {
        return this.substr(!e || e < 0 ? 0 : +e, t.length) === t;
      }),
    String.prototype.endsWith ||
      (String.prototype.endsWith = function (t, e) {
        return (
          (void 0 === e || e > this.length) && (e = this.length),
          this.substring(e - t.length, e) === t
        );
      }),
    Math.clamp ||
      (Math.clamp = function (t, e, n) {
        return Math.min(Math.max(t, e), n);
      }),
    Math.square ||
      (Math.square = function (t) {
        return t * t;
      }),
    Number.isInteger ||
      (Number.isInteger = function (t) {
        return "number" == typeof t && isFinite(t) && Math.floor(t) === t;
      }),
    document.hasFocus ||
      (document.hasFocus = function () {
        return "visible" === document.visibilityState;
      }),
    (navigator.vibrate =
      navigator.vibrate ||
      navigator.webkitVibrate ||
      navigator.mozVibrate ||
      navigator.msVibrate),
    Element.prototype.matches ||
      (Element.prototype.matches =
        Element.prototype.msMatchesSelector ||
        Element.prototype.webkitMatchesSelector),
    (Element.prototype.html = function (t) {
      if (void 0 === t) return this.innerHTML;
      this.innerHTML = t;
    }),
    (Node.prototype.getText = function () {
      var t = this,
        e = t.nodeType;
      if (1 !== e && 9 !== e && 11 !== e)
        return 3 === e || 4 === e ? t.nodeValue : "";
      if ("string" == typeof t.textContent) return t.textContent;
      for (var n = [], o = t.firstChild; o; o = o.nextSibling)
        n.push(o.getText());
      return n.join("");
    }),
    (Node.prototype.setText = function (t) {
      var e = this.nodeType;
      1 === e || 9 === e || 11 === e
        ? (this.textContent = t)
        : (3 !== e && 4 !== e) || (this.nodeValue = t);
    }),
    (Node.prototype.insertAfter = function (t) {
      t.parentNode && t.parentNode.insertBefore(this, t.nextSibling);
    }),
    (Node.prototype.append = function (t) {
      t.detach(), this.appendChild(t);
    }),
    (Node.prototype.appendEl = function (t) {
      t.parentNode !== this && t.detach(),
        this.lastChild !== t && this.appendChild(t);
    }),
    (Node.prototype.prepend = function (t) {
      t.detach(), this.insertBefore(t, this.firstChild);
    }),
    (Node.prototype.detach = function () {
      this.parentNode && this.parentNode.removeChild(this);
    }),
    (Node.prototype.empty = function () {
      for (; this.lastChild; ) this.removeChild(this.lastChild);
      return this;
    }),
    (Node.prototype.indexOf = function (t) {
      return Array.prototype.indexOf.call(this.childNodes, t);
    });
  var e = "_dynalist_ctx";
  (Element.prototype.getCtx = function () {
    return this[e];
  }),
    (Element.prototype.hasCtx = function () {
      return bool(this[e]);
    }),
    (Element.prototype.setCtx = function (t) {
      this[e] = t;
    }),
    (Element.prototype.addClass = function () {
      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
      return this.addClasses(t), this;
    }),
    (Element.prototype.addClasses = function (t) {
      for (var e = 0; e < t.length; e++) this.classList.add(t[e]);
      return this;
    }),
    (Element.prototype.removeClass = function () {
      for (var t = [], e = 0; e < arguments.length; e++) t[e] = arguments[e];
      return this.removeClasses(t), this;
    }),
    (Element.prototype.removeClasses = function (t) {
      for (var e = 0; e < t.length; e++) this.classList.remove(t[e]);
      return this;
    }),
    (Element.prototype.toggleClass = function (t, e) {
      return (
        t instanceof Array || (t = [t]),
        e ? this.addClasses(t) : this.removeClasses(t),
        this
      );
    }),
    (Element.prototype.hasClass = function (t) {
      return this.classList.contains(t);
    }),
    (Element.prototype.setAttr = function (t, e) {
      this.setAttribute(t, String(e));
    }),
    (Element.prototype.setAttrs = function (t) {
      for (var e in t) t.hasOwnProperty(e) && this.setAttr(e, t[e]);
    }),
    (Element.prototype.getAttr = Element.prototype.getAttribute),
    HTMLElement.prototype.show ||
      (HTMLElement.prototype.show = function () {
        return (
          "none" === this.style.display &&
            ((this.style.display = this.getAttribute("data-display") || ""),
            this.removeAttribute("data-display")),
          this
        );
      }),
    HTMLElement.prototype.hide ||
      (HTMLElement.prototype.hide = function () {
        var t = this.style.display;
        return (
          "none" !== t &&
            ((this.style.display = "none"),
            t
              ? this.setAttribute("data-display", t)
              : this.removeAttribute("data-display")),
          this
        );
      }),
    HTMLElement.prototype.visible ||
      Object.defineProperty(HTMLElement.prototype, "visible", {
        get: function () {
          return null !== this.offsetParent;
        },
      }),
    (Element.prototype.uShow = function () {
      this.removeClass("u-hidden");
    }),
    (Element.prototype.uHide = function () {
      this.addClass("u-hidden");
    }),
    (Element.prototype.uToggle = function (t) {
      this.toggleClass("u-hidden", !t);
    }),
    (window.fish = function (t) {
      return document.querySelector(t);
    }),
    (window.fishAll = function (t) {
      return Array.prototype.slice.call(document.querySelectorAll(t));
    }),
    (Element.prototype.find = function (t) {
      return this.querySelector(t);
    }),
    (Element.prototype.findAll = function (t) {
      return Array.prototype.slice.call(this.querySelectorAll(t));
    }),
    (Node.prototype.createEl = function (t, e, n) {
      return ((e = e || {}).parent = this), createEl(t, e, n);
    }),
    (window.createEl = function t(e, n, o) {
      var i = n || {},
        r = i.cls,
        s = i.text,
        a = i.attr,
        c = i.title,
        u = i.value,
        l = i.type,
        p = i.parent,
        h = document.createElement(e);
      return (
        r &&
          (Array.isArray(r) ? (h.className = r.join(" ")) : (h.className = r)),
        s && h.setText(s),
        a && h.setAttrs(a),
        c && (h.title = c),
        u &&
          (h instanceof HTMLInputElement ||
            h instanceof HTMLSelectElement ||
            h instanceof HTMLOptionElement) &&
          (h.value = u),
        l && h instanceof HTMLInputElement && (h.type = l),
        o && o(h),
        p && p.appendChild(h),
        h
      );
    });
  var t = function (t, n, o, e) {
      var i = this._DYNALIST_EVENTS;
      i || ((i = {}), (this._DYNALIST_EVENTS = i));
      var r = i[t];
      r || ((r = []), (i[t] = r));
      var s = function (t) {
        var e = (function t(e, n, o) {
          return e
            ? e.matches(n)
              ? e
              : e === o
              ? null
              : t(e.parentElement, n, o)
            : null;
        })(t.target, n, t.currentTarget);
        e && o.call(this, t, e);
      };
      r.push({ selector: n, listener: o, options: e, callback: s }),
        this.addEventListener(t, s, e);
    },
    o = function (n, o, i, r) {
      var s = this,
        t = this._DYNALIST_EVENTS;
      if (t) {
        var e = t[n];
        e &&
          (t[n] = e.filter(function (t) {
            if (t.selector !== o || t.listener !== i || t.options !== r)
              return !0;
            var e = t.callback;
            return s.removeEventListener(n, e, r), !1;
          }));
      }
    };
  (HTMLElement.prototype.on = t),
    (Document.prototype.on = t),
    (HTMLElement.prototype.off = o),
    (Document.prototype.off = o),
    (window.bool = function (t) {
      return !!t;
    }),
    (window.isString = function (t) {
      return "string" == typeof t || t instanceof String;
    }),
    (window.parseBool = function (t) {
      return "false" !== t && 0 !== t && ("true" === t || bool(t));
    }),
    (window.clone_arguments = function (t) {
      for (var e = t.length, n = [], o = 0; o < e; o++) n.push(t[o]);
      return n;
    }),
    (window.isArrayLike = function (t) {
      return (
        Array.isArray(t) ||
        (bool(t) &&
          "object" == typeof t &&
          "number" == typeof t.length &&
          (0 === t.length || 0 < t.length))
      );
    }),
    (window.each = function (t, e, n, o) {
      if (isArrayLike(t)) {
        if (o) {
          for (var i = t.length - 1; 0 <= i; i--)
            if (!1 === e.call(n, t[i], i, t)) return !1;
        } else
          for (i = 0; i < t.length; i++)
            if (!1 === e.call(n, t[i], i, t)) return !1;
      } else if (t instanceof Object)
        for (var r in t)
          if (t.hasOwnProperty(r) && !1 === e.call(n, t[r], r, t)) return !1;
      return !0;
    }),
    (window.each_reverse = function (t, e, n) {
      return each(t, e, n, !0);
    }),
    (window.debounce = function (t, n, o, i, r) {
      var s = null,
        a = null,
        c = null,
        u = !1,
        l = 0,
        p = function () {
          (s = null), r && (l = Date.now()), t.apply(a, c);
        },
        h = function (t, e) {
          t && s && clearTimeout(s), (!t && s) || (s = setTimeout(p, e));
        },
        f = function () {
          if (u) return f;
          if (!s || i) {
            (a = this), (c = []);
            for (var t = 0; t < arguments.length; t++) c.push(arguments[t]);
          }
          if (r) {
            var e = Date.now();
            if (l < e - n) return (l = e), p(), f;
          }
          return h(o, n), f;
        };
      return (
        (f.cancel = function () {
          return s && (clearTimeout(s), (s = null)), f;
        }),
        (f.disable = function () {
          return (u = !0), f;
        }),
        (f.enable = function () {
          return (u = !1), f;
        }),
        (f.set_timeout = function (t) {
          return (n = t), s && h(!0, n), f;
        }),
        (f.flush = function () {
          return h(!0, 0), f;
        }),
        f
      );
    }),
    (window.log = function () {
      console.log.apply(console, arguments);
    }),
    (window.stacktrace = function (t) {
      t || (t = new Error());
      var e = Array.prototype.cloneInline.call(arguments);
      e.push(get_stacktrace(t)), console.error.apply(console, e);
    }),
    (window.assert = function (t, e, n) {
      if (!t) {
        var o = "Assert Failed";
        e && (o += ": " + e), n && (o += ": " + n), trace(o, new Error());
      }
    }),
    (window.trace = function (t, e) {
      e && (t += "\n" + get_stacktrace(e)), console.error(t);
    }),
    (window.assert_equal = function (t, e, n) {
      assert(t === e, t + " != " + e, n);
    }),
    (window.assert_not_null = function (t, e) {
      assert(null != t, t + " is null", e);
    }),
    (window.assert_not_reached = function (t) {
      assert(!1, "Should not reach here.", t);
    }),
    (window.get_stacktrace = function (t) {
      return t.stack || t.stacktrace || "";
    }),
    (window.track_error = function (t, e) {
      console.error(t);
    }),
    (window.unsafe = function (t) {
      try {
        return t();
      } catch (t) {
        track_error(t);
      }
    }),
    (window.performance && window.performance.now) ||
      (window.performance = Date),
    (window.perf = function (t, e) {
      var n = performance.now();
      if (e) for (var o = 0; o < e; o++) t();
      else t();
      var i = performance.now() - n;
      return Math.round(i);
    });
  DYNALIST.SERVER_PROTOCOL, DYNALIST.SERVER_HOST;
  var c = DYNALIST.SERVER_URL || "https://dynalist.io",
    r = (DYNALIST.PUSH_URL, 13),
    i = "/user/login",
    s = "/user/signup",
    a = "/user/resetpass",
    u = "/loginrequest/create",
    l = "/loginrequest/login",
    p = "/user/forgotpass",
    h = "/feedback",
    f = "/import/workflowy",
    d = "/user/google_login",
    g = "/user/apple_login",
    y = "/user/google_link",
    _ = "Ok",
    m = "NotSignedIn",
    w = "NetError",
    v = "BadResponse",
    b = "Deprecated",
    k = 6e4,
    A = "text/plain; charset=UTF-8";
  function E(t, e, n, o, i) {
    var r = (i = i || {}).timeout,
      s = i.contentType,
      a = i.raw,
      c = i.headers;
    a || (e = JSON.stringify(e)),
      r || (r = k),
      s || (s = A),
      $.ajax(t, {
        type: "POST",
        data: e,
        contentType: s,
        timeout: r,
        xhrFields: { withCredentials: !0 },
        processData: !1,
        headers: c,
        dataType: "json",
        success: n,
        error: o,
      });
  }
  var T = null;
  var S = (function () {
      var y = String.fromCharCode,
        n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
        o = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",
        i = {};
      function r(t, e) {
        if (!i[t]) {
          i[t] = {};
          for (var n = 0; n < t.length; n++) i[t][t.charAt(n)] = n;
        }
        return i[t][e];
      }
      var s = {
        compressToBase64: function (t) {
          if (null == t) return "";
          for (
            var e = s._compress(t, 6, function (t) {
              return n.charAt(t);
            });
            0 < e.length % 4;

          )
            e += "=";
        },
        decompressFromBase64: function (e) {
          return null === e
            ? ""
            : "" === e
            ? null
            : s._decompress(e.length, 32, function (t) {
                return r(n, e.charAt(t));
              });
        },
        compressToUTF16: function (t) {
          return null == t
            ? ""
            : s._compress(t, 15, function (t) {
                return y(t + 32);
              }) + " ";
        },
        decompressFromUTF16: function (e) {
          return null == e
            ? ""
            : "" == e
            ? null
            : s._decompress(e.length, 16384, function (t) {
                return e.charCodeAt(t) - 32;
              });
        },
        compressToUint8Array: function (t) {
          for (
            var e = s.compress(t),
              n = new Uint8Array(2 * e.length),
              o = 0,
              i = e.length;
            o < i;
            o++
          ) {
            var r = e.charCodeAt(o);
            (n[2 * o] = r >>> 8), (n[2 * o + 1] = r % 256);
          }
          return n;
        },
        decompressFromUint8Array: function (t) {
          if (null == t) return s.decompress(t);
          for (var e = new Array(t.length / 2), n = 0, o = e.length; n < o; n++)
            e[n] = 256 * t[2 * n] + t[2 * n + 1];
          var i = [];
          return (
            e.forEach(function (t) {
              i.push(y(t));
            }),
            s.decompress(i.join(""))
          );
        },
        compressToEncodedURIComponent: function (t) {
          return null == t
            ? ""
            : s._compress(t, 6, function (t) {
                return o.charAt(t);
              });
        },
        decompressFromEncodedURIComponent: function (e) {
          return null == e
            ? ""
            : "" == e
            ? null
            : ((e = e.replace(/ /g, "+")),
              s._decompress(e.length, 32, function (t) {
                return r(o, e.charAt(t));
              }));
        },
        compress: function (t) {
          return s._compress(t, 16, function (t) {
            return y(t);
          });
        },
        _compress: function (t, e, n) {
          if (null == t) return "";
          var o,
            i,
            r,
            s = {},
            a = {},
            c = "",
            u = "",
            l = "",
            p = 2,
            h = 3,
            f = 2,
            d = [],
            g = 0,
            y = 0;
          for (r = 0; r < t.length; r += 1)
            if (
              ((c = t.charAt(r)),
              Object.prototype.hasOwnProperty.call(s, c) ||
                ((s[c] = h++), (a[c] = !0)),
              (u = l + c),
              Object.prototype.hasOwnProperty.call(s, u))
            )
              l = u;
            else {
              if (Object.prototype.hasOwnProperty.call(a, l)) {
                if (l.charCodeAt(0) < 256) {
                  for (o = 0; o < f; o++)
                    (g <<= 1),
                      y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++;
                  for (i = l.charCodeAt(0), o = 0; o < 8; o++)
                    (g = (g << 1) | (1 & i)),
                      y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++,
                      (i >>= 1);
                } else {
                  for (i = 1, o = 0; o < f; o++)
                    (g = (g << 1) | i),
                      y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++,
                      (i = 0);
                  for (i = l.charCodeAt(0), o = 0; o < 16; o++)
                    (g = (g << 1) | (1 & i)),
                      y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++,
                      (i >>= 1);
                }
                0 == --p && ((p = Math.pow(2, f)), f++), delete a[l];
              } else
                for (i = s[l], o = 0; o < f; o++)
                  (g = (g << 1) | (1 & i)),
                    y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++,
                    (i >>= 1);
              0 == --p && ((p = Math.pow(2, f)), f++),
                (s[u] = h++),
                (l = String(c));
            }
          if ("" !== l) {
            if (Object.prototype.hasOwnProperty.call(a, l)) {
              if (l.charCodeAt(0) < 256) {
                for (o = 0; o < f; o++)
                  (g <<= 1),
                    y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++;
                for (i = l.charCodeAt(0), o = 0; o < 8; o++)
                  (g = (g << 1) | (1 & i)),
                    y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++,
                    (i >>= 1);
              } else {
                for (i = 1, o = 0; o < f; o++)
                  (g = (g << 1) | i),
                    y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++,
                    (i = 0);
                for (i = l.charCodeAt(0), o = 0; o < 16; o++)
                  (g = (g << 1) | (1 & i)),
                    y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++,
                    (i >>= 1);
              }
              0 == --p && ((p = Math.pow(2, f)), f++), delete a[l];
            } else
              for (i = s[l], o = 0; o < f; o++)
                (g = (g << 1) | (1 & i)),
                  y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++,
                  (i >>= 1);
            0 == --p && ((p = Math.pow(2, f)), f++);
          }
          for (i = 2, o = 0; o < f; o++)
            (g = (g << 1) | (1 & i)),
              y == e - 1 ? ((y = 0), d.push(n(g)), (g = 0)) : y++,
              (i >>= 1);
          for (;;) {
            if (((g <<= 1), y == e - 1)) {
              d.push(n(g));
              break;
            }
            y++;
          }
          return d.join("");
        },
        decompress: function (e) {
          return null == e
            ? ""
            : "" == e
            ? null
            : s._decompress(e.length, 32768, function (t) {
                return e.charCodeAt(t);
              });
        },
        _decompress: function (t, e, n) {
          var o,
            i,
            r,
            s,
            a,
            c,
            u = [0, 1, 2],
            l = 4,
            p = 4,
            h = 3,
            f = "",
            d = [],
            g = { val: n(0), position: e, index: 1 };
          for (i = 0, s = Math.pow(2, 2), a = 1; a != s; )
            (r = g.val & g.position),
              (g.position >>= 1),
              0 == g.position && ((g.position = e), (g.val = n(g.index++))),
              (i |= (0 < r ? 1 : 0) * a),
              (a <<= 1);
          switch (i) {
            case 0:
              for (i = 0, s = Math.pow(2, 8), a = 1; a != s; )
                (r = g.val & g.position),
                  (g.position >>= 1),
                  0 == g.position && ((g.position = e), (g.val = n(g.index++))),
                  (i |= (0 < r ? 1 : 0) * a),
                  (a <<= 1);
              c = y(i);
              break;
            case 1:
              for (i = 0, s = Math.pow(2, 16), a = 1; a != s; )
                (r = g.val & g.position),
                  (g.position >>= 1),
                  0 == g.position && ((g.position = e), (g.val = n(g.index++))),
                  (i |= (0 < r ? 1 : 0) * a),
                  (a <<= 1);
              c = y(i);
              break;
            case 2:
              return "";
          }
          for (o = u[3] = c, d.push(c); ; ) {
            if (g.index > t) return "";
            for (i = 0, s = Math.pow(2, h), a = 1; a != s; )
              (r = g.val & g.position),
                (g.position >>= 1),
                0 == g.position && ((g.position = e), (g.val = n(g.index++))),
                (i |= (0 < r ? 1 : 0) * a),
                (a <<= 1);
            switch ((c = i)) {
              case 0:
                for (i = 0, s = Math.pow(2, 8), a = 1; a != s; )
                  (r = g.val & g.position),
                    (g.position >>= 1),
                    0 == g.position &&
                      ((g.position = e), (g.val = n(g.index++))),
                    (i |= (0 < r ? 1 : 0) * a),
                    (a <<= 1);
                (u[p++] = y(i)), (c = p - 1), l--;
                break;
              case 1:
                for (i = 0, s = Math.pow(2, 16), a = 1; a != s; )
                  (r = g.val & g.position),
                    (g.position >>= 1),
                    0 == g.position &&
                      ((g.position = e), (g.val = n(g.index++))),
                    (i |= (0 < r ? 1 : 0) * a),
                    (a <<= 1);
                (u[p++] = y(i)), (c = p - 1), l--;
                break;
              case 2:
                return d.join("");
            }
            if ((0 == l && ((l = Math.pow(2, h)), h++), u[c])) f = u[c];
            else {
              if (c !== p) return null;
              f = o + o.charAt(0);
            }
            d.push(f),
              (u[p++] = o + f.charAt(0)),
              (o = f),
              0 == --l && ((l = Math.pow(2, h)), h++);
          }
        },
      };
      return s;
    })(),
    O = (function () {
      function r() {}
      return (
        (r.encode_url_query = function (t) {
          if (!t) return "";
          var e = [];
          for (var n in t)
            t.hasOwnProperty(n) &&
              t[n] &&
              (!0 === t[n]
                ? e.push(encodeURIComponent(n))
                : e.push(
                    encodeURIComponent(n) + "=" + encodeURIComponent(t[n]),
                  ));
          return e.join("&");
        }),
        (r.decode_url_query = function (t) {
          var e = {};
          if (!t || "" === t.trim()) return e;
          for (var n = t.split("&"), o = 0; o < n.length; o++) {
            var i = n[o].split("=");
            if (1 <= i.length && i[0]) {
              var r = decodeURIComponent(i[0]);
              2 === i.length ? (e[r] = decodeURIComponent(i[1])) : (e[r] = !0);
            }
          }
          return e;
        }),
        (r.decode_url = function (t) {
          t || (t = "");
          var e = t.split("#"),
            n = 1 < e.length ? e[1] : "",
            o = e[0].split("?"),
            i = 1 < o.length ? o[1] : "";
          return {
            path: o[0],
            query: r.decode_url_query(i),
            hash: r.decode_url_query(n),
          };
        }),
        r
      );
    })(),
    x = DYNALIST.SERVICES_URL || "https://dynlst.com",
    C = "/update",
    L = 5e3,
    j = 1.5,
    N = 6e5,
    M = 3e5,
    q = 864e5,
    I = 500,
    P = 5e3,
    D = 100;
  function F() {
    return Date.now();
  }
  function R(t, e, n, o) {
    E(x + t, e, n, o);
  }
  function Y() {
    return O.decode_url(window.location.href).query.src || null;
  }
  var z = (function () {
      function t(t) {
        (this.uid = t),
          (this.ts_diff = 0),
          (this.ts = 0),
          (this.data = []),
          (this.length = 0),
          (this.failed = 0),
          (this.working = !1),
          (this.lz = !0),
          (this.timer = null),
          (this._request_run = debounce(this.run, L));
      }
      return (
        (t.prototype.request_run = function () {
          var t = Math.pow(j, this.failed) * L;
          N < t && (t = N),
            (t = Math.floor(t)),
            this._request_run.set_timeout(t),
            this._request_run();
        }),
        (t.prototype.run = function () {
          if (0 !== this.data.length) {
            var t = F();
            this.ts < t - M ? this.refresh() : this.push();
          }
        }),
        (t.prototype.refresh = function () {
          var n = this;
          if (!this.working) {
            var o = F();
            (this.working = !0),
              R(
                C,
                {},
                function () {
                  (n.working = !1), (n.failed = 0);
                  var t = F(),
                    e = t - o;
                  (n.ts_diff = Math.floor(e / 2)), (n.ts = t), n.run();
                },
                function () {
                  (n.working = !1), n.failed++, n.request_run();
                },
              );
          }
        }),
        (t.prototype.track = function (t, e, n) {
          try {
            if (!0 === t) return void this.run();
            (e = e || {}),
              unsafe(function () {
                return (function t(e) {
                  if (e.url) {
                    e.url = window.location.href;
                    var n = unsafe(Y);
                    n && (e.src = n);
                  }
                  e.referrer &&
                    ((e.referrer = document.referrer),
                    e.referrer || delete e.referrer);
                })(e);
              }),
              this.data.push({ type: t, ts: F(), data: e }),
              this.prune(),
              n ? this.run() : this.request_run();
          } catch (t) {
            track_error(t);
          }
        }),
        (t.prototype.prune = function () {
          if (!(this.data.length < I)) {
            for (
              var t = F() - q, e = 0;
              e < this.data.length && !(this.data[e].ts > t);
              e++
            );
            0 < e && this.data.splice(0, e),
              this.data.length > P && this.data.splice(0, this.data.length - P);
          }
        }),
        (t.prototype.push = function () {
          var e = this;
          if (!this.working && 0 !== this.data.length) {
            this.length = Math.min(D, this.data.length);
            var t = this.data.slice(0, this.length);
            this.lz && ((t = JSON.stringify(t)), (t = S.compressToUTF16(t)));
            var n = {
                uid: this.uid,
                ts: this.ts_diff + F(),
                lz: this.lz,
                data: t,
              },
              o = function (t) {
                (e.working = !1),
                  t
                    ? ((e.failed = 0), e.data.splice(0, e.length))
                    : (e.failed++, (e.length = 0)),
                  0 < e.data.length && e.request_run();
              };
            (this.working = !0),
              R(
                C,
                n,
                function (t) {
                  o(bool(t && t.status));
                },
                function () {
                  o(!1);
                },
              );
          }
        }),
        (t.prototype.preview = function () {
          return this.data
            .map(function (t) {
              return JSON.stringify(t);
            })
            .join("\n");
        }),
        t
      );
    })(),
    U = (function () {
      var s,
        r,
        a = window,
        c = "fulfilled",
        u = (function () {
          var e = [],
            n = 0;
          function o() {
            for (; e.length - n; ) {
              try {
                e[n]();
              } catch (t) {
                a.console && a.console.error(t);
              }
              (e[n++] = r), 1024 == n && (e.splice(0, 1024), (n = 0));
            }
          }
          var i = (function () {
            if ("undefined" == typeof MutationObserver)
              return function () {
                setTimeout(o, 0);
              };
            var t = document.createElement("div");
            return (
              new MutationObserver(o).observe(t, { attributes: !0 }),
              function () {
                t.setAttribute("a", 0);
              }
            );
          })();
          return function (t) {
            e.push(t), e.length - n == 1 && i();
          };
        })();
      function l(t) {
        if (t) {
          var e = this;
          t(
            function (t) {
              e.resolve(t);
            },
            function (t) {
              e.reject(t);
            },
          );
        }
      }
      function p(e, t) {
        if ("function" == typeof e.y)
          try {
            var n = e.y.call(r, t);
            e.p.resolve(n);
          } catch (t) {
            e.p.reject(t);
          }
        else e.p.resolve(t);
      }
      function h(e, t) {
        if ("function" == typeof e.n)
          try {
            var n = e.n.call(r, t);
            e.p.resolve(n);
          } catch (t) {
            e.p.reject(t);
          }
        else e.p.reject(t);
      }
      return (
        (l.prototype = {
          resolve: function (n) {
            if (this.state === s) {
              if (n === this)
                return this.reject(
                  new TypeError("Attempt to resolve promise with self"),
                );
              var o = this;
              if (n && ("function" == typeof n || "object" == typeof n))
                try {
                  var e = !0,
                    t = n.then;
                  if ("function" == typeof t)
                    return void t.call(
                      n,
                      function (t) {
                        e && ((e = !1), o.resolve(t));
                      },
                      function (t) {
                        e && ((e = !1), o.reject(t));
                      },
                    );
                } catch (t) {
                  return void (e && this.reject(t));
                }
              (this.state = c),
                (this.v = n),
                o.c &&
                  u(function () {
                    for (var t = 0, e = o.c.length; t < e; t++) p(o.c[t], n);
                  });
            }
          },
          reject: function (n) {
            if (this.state === s) {
              (this.state = "rejected"), (this.v = n);
              var o = this.c;
              o
                ? u(function () {
                    for (var t = 0, e = o.length; t < e; t++) h(o[t], n);
                  })
                : !l.suppressUncaughtRejectionError &&
                  a.console &&
                  a.console.log(
                    "You upset Zousan. Please catch rejections: ",
                    n,
                    n ? n.stack : null,
                  );
            }
          },
          then: function (t, e) {
            var n = new l(),
              o = { y: t, n: e, p: n };
            if (this.state === s) this.c ? this.c.push(o) : (this.c = [o]);
            else {
              var i = this.state,
                r = this.v;
              u(function () {
                i === c ? p(o, r) : h(o, r);
              });
            }
            return n;
          },
          catch: function (t) {
            return this.then(null, t);
          },
          finally: function (t) {
            return this.then(t, t);
          },
          timeout: function (t, o) {
            o = o || "Timeout";
            var i = this;
            return new l(function (e, n) {
              setTimeout(function () {
                n(Error(o));
              }, t),
                i.then(
                  function (t) {
                    e(t);
                  },
                  function (t) {
                    n(t);
                  },
                );
            });
          },
        }),
        (l.resolve = function (t) {
          var e = new l();
          return e.resolve(t), e;
        }),
        (l.reject = function (t) {
          var e = new l();
          return e.reject(t), e;
        }),
        (l.all = function (n) {
          var o = [],
            i = 0,
            r = new l();
          function t(t, e) {
            (t && "function" == typeof t.then) || (t = l.resolve(t)),
              t.then(
                function (t) {
                  (o[e] = t), ++i == n.length && r.resolve(o);
                },
                function (t) {
                  r.reject(t);
                },
              );
          }
          for (var e = 0; e < n.length; e++) t(n[e], e);
          return n.length || r.resolve(o), r;
        }),
        ((a.Zousan = l).soon = u),
        (l.cb_resolve = function (e) {
          return function (t) {
            e && e(null, t);
          };
        }),
        (l.cb_reject = function (e) {
          return function (t) {
            e && e(t);
          };
        }),
        l
      );
    })(),
    H = "web";
  DYNALIST.IS_STANDALONE_MODE &&
    ((H = "desktop"),
    window.process && window.process.platform && (H = window.process.platform)),
    (window.Zousan = U),
    (DYNALIST.PLATFORM = H);
  var V = new z(DYNALIST.SESSION.identity);
  (window.ghost = V),
    (window.__ = V.track.bind(V)),
    __("hit", { url: !0, referrer: !0 }, !0);
  var G = function (t, e) {
    return (G =
      Object.setPrototypeOf ||
      ({ __proto__: [] } instanceof Array &&
        function (t, e) {
          t.__proto__ = e;
        }) ||
      function (t, e) {
        for (var n in e) e.hasOwnProperty(n) && (t[n] = e[n]);
      })(t, e);
  };
  function B(t, e) {
    function n() {
      this.constructor = t;
    }
    G(t, e),
      (t.prototype =
        null === e ? Object.create(e) : ((n.prototype = e.prototype), new n()));
  }
  !(function () {
    function t() {
      (this.a = []), (this.b = []);
    }
    (t.prototype.enqueue = function (t) {
      this.a.push(t);
    }),
      (t.prototype.flip = function () {
        if (0 === this.b.length)
          for (var t = this.a.length - 1; 0 <= t; t--)
            this.b.push(this.a.pop());
      }),
      (t.prototype.dequeue = function () {
        if (!this.empty) return this.flip(), this.b.pop();
      }),
      Object.defineProperty(t.prototype, "empty", {
        get: function () {
          return 0 === this.length;
        },
        enumerable: !0,
        configurable: !0,
      }),
      Object.defineProperty(t.prototype, "length", {
        get: function () {
          return this.a.length + this.b.length;
        },
        enumerable: !0,
        configurable: !0,
      });
  })();
  var W = (function () {
      function t(t) {
        t || (t = new Z()), (this.events = t);
      }
      return (
        (t.prototype.on = function (t, e, n) {
          return this.events.on(t, e, n);
        }),
        (t.prototype.off = function (t, e) {
          this.events.off(t, e);
        }),
        (t.prototype.offref = function (t) {
          this.events.offref(t);
        }),
        (t.prototype.trigger = function (t) {
          for (var e, n = [], o = 1; o < arguments.length; o++)
            n[o - 1] = arguments[o];
          (e = this.events).trigger.apply(
            e,
            (function t() {
              for (var e = 0, n = 0, o = arguments.length; n < o; n++)
                e += arguments[n].length;
              var i = Array(e),
                r = 0;
              for (n = 0; n < o; n++)
                for (var s = arguments[n], a = 0, c = s.length; a < c; a++, r++)
                  i[r] = s[a];
              return i;
            })([t], n),
          );
        }),
        t
      );
    })(),
    Z = (function () {
      function t(t) {
        (this._ = {}),
          t &&
            ((t.on = this.on.bind(this)),
            (t.off = this.off.bind(this)),
            (t.offref = this.offref.bind(this)),
            (t.trigger = this.trigger.bind(this))),
          (this.disabled = !1);
      }
      return (
        (t.prototype.on = function (t, e, n) {
          var o = this._,
            i = o[t];
          i || (o[t] = i = []);
          var r = { name: t, fn: e, ctx: n };
          return i.push(r), r;
        }),
        (t.prototype.off = function (t, e) {
          var n = this._,
            o = n[t],
            i = [];
          if (o && e)
            for (var r = 0; r < o.length; r++) o[r].fn !== e && i.push(o[r]);
          0 < i.length ? (n[t] = i) : delete n[t];
        }),
        (t.prototype.offref = function (t) {
          if (t) {
            var e = t.name,
              n = this._,
              o = n[e],
              i = [];
            if (o && t)
              for (var r = 0; r < o.length; r++) o[r] !== t && i.push(o[r]);
            i.length ? (n[e] = i) : delete n[e];
          }
        }),
        (t.prototype.trigger = function (t) {
          for (var e = [], n = 1; n < arguments.length; n++)
            e[n - 1] = arguments[n];
          if (!this.disabled) {
            var o = this._[t];
            if (o) {
              o = o.slice();
              for (var i = 0; i < o.length; i++) this.tryTrigger(o[i], e);
            }
          }
        }),
        (t.prototype.tryTrigger = function (t, e) {
          try {
            t.fn.apply(t.ctx, e);
          } catch (t) {
            setTimeout(function () {
              throw t;
            }, 0);
          }
        }),
        (t.prototype.disable_for = function (t) {
          try {
            (this.disabled = !0), t();
          } finally {
            this.disabled = !1;
          }
        }),
        t
      );
    })(),
    J = (function (n) {
      function t(t) {
        var e = n.call(this, new Z()) || this;
        return (
          (e.working = !1),
          (e.build = ""),
          (e.prevent_multi = t),
          DYNALIST.OFFLINE && (e.offline = !0),
          (e.connected = !0),
          (e.ping_when_disconnected = !0),
          (e.ping_timer = null),
          (e.queue = []),
          (e.errors = []),
          (e.timer = null),
          e
        );
      }
      return (
        B(t, n),
        (t.prototype.get_errors = function () {
          return this.errors;
        }),
        (t.prototype.ping = function () {
          this.enqueue("/ping", {});
        }),
        (t.prototype.enqueue_promise = function (t, e, n) {
          var o = new Zousan();
          return (
            this.enqueue(
              t,
              e,
              function () {
                o.resolve.apply(o, arguments);
              },
              function () {
                o.reject.apply(o, arguments);
              },
              n,
            ),
            o
          );
        }),
        (t.prototype.enqueue = function (t, e, n, o, i) {
          (this.prevent_multi && this.working) ||
            (this.queue.push({
              url: t,
              data: e,
              success: n,
              error: o,
              options: i,
            }),
            this.run());
        }),
        (t.prototype.run = function () {
          var o = this;
          if (!this.working && 0 !== this.queue.length) {
            this.timer && (clearTimeout(this.timer), (this.timer = null));
            var t = this.queue.shift(),
              e = t.url,
              n = t.data,
              i = t.success,
              r = t.error,
              s = t.options;
            if (((this.working = !0), this.offline))
              return (
                console.log("Net (offline):", " -> " + e, n),
                void this.handle_error("offline", r)
              );
            !(function t(e, n, o, i, r) {
              if (!(r = r || {}).raw) {
                var s = DYNALIST.DEPLOY_BUILD;
                s && (n._build = s);
              }
              var a = "/api" + e;
              DYNALIST.IS_STANDALONE_MODE && (a = c + a),
                T && ((r.headers = r.headers || {}), (r.headers.DYS = T)),
                E(
                  a,
                  n,
                  function (t, e, n) {
                    unsafe(function () {
                      var t = n.getResponseHeader("DYS");
                      t && (T = t);
                    }),
                      o && o(t, e, n);
                  },
                  i,
                  r,
                );
            })(
              e,
              n,
              function (t) {
                return o.handle_response(t, i, r);
              },
              function (t, e, n) {
                return o.handle_error(e, r);
              },
              s,
            );
          }
        }),
        (t.prototype.handle_response = function (t, e, n) {
          (this.working = !1),
            this.connected ||
              ((this.connected = !0),
              this.trigger("connected"),
              this.ping_timer &&
                (clearInterval(this.ping_timer), (this.ping_timer = null)));
          try {
            if (t) {
              var o = t._mv,
                i = DYNALIST.VERSION;
              i && o && i < o && this.trigger("network_deprecated");
              var r = t._b;
              return (
                r &&
                  this.build !== r &&
                  ((this.build = r), this.trigger("build_changed", r)),
                t._code === b && this.trigger("network_deprecated"),
                t._code === m && this.trigger("network_logged_out"),
                void (t._code === _ ? e && e(t) : n && n(t))
              );
            }
            n && n({ _code: v });
          } catch (t) {
            !(function t(e) {
              return setTimeout(e, 0);
            })(function () {
              throw t;
            });
          } finally {
            this.run();
          }
        }),
        (t.prototype.handle_error = function (t, e) {
          var n = this;
          this.working = !1;
          try {
            var o = w;
            switch (t) {
              case "offline":
              case "timeout":
              case "error":
              case "abort":
                o = w;
                break;
              case "parsererror":
                o = v;
            }
            o === w &&
              this.connected &&
              ((this.connected = !1),
              this.trigger("disconnected"),
              this.ping_timer && clearInterval(this.ping_timer),
              this.ping_when_disconnected &&
                (this.ping_timer = setInterval(function () {
                  0 === n.queue.length && n.ping();
                }, 3e4))),
              e && e({ _code: o });
          } finally {
            this.run();
          }
        }),
        (t.prototype.record_error = function (t, e, n) {
          this.errors.push({ source: t, request: e, error: n }),
            5 < this.errors.length &&
              this.errors.splice(0, this.errors.length - 5);
        }),
        (t.prototype.get_is_connected = function () {
          return this.connected;
        }),
        t
      );
    })(W);
  function K() {
    window.location.reload();
  }
  function X(t) {
    var e = document.createElement("script");
    (e.async = !0), (e.defer = !0), (e.src = t), document.body.append(e);
  }
  function Q() {
    var e = [],
      t = function () {
        if (e) for (var t = 0; t < e.length; t++) e[t]();
        e = null;
      };
    return (
      (t.push = function (t) {
        e ? e.push(t) : t();
      }),
      t
    );
  }
  var tt = "gRecaptcha",
    et = (function () {
      function t(t, e) {
        (this.element = t), (this.sitekey = e), (this.captcha = null);
      }
      return (
        (t.prototype.initialize = function () {
          return (
            !!window[tt] ||
            ((window[tt] = Q()),
            X(
              "https://www.recaptcha.net/recaptcha/api.js?onload=" +
                tt +
                "&render=explicit",
            ),
            !1)
          );
        }),
        (t.prototype.load_captcha_when_ready = function () {
          var t = this;
          this.initialize(),
            window[tt].push(function () {
              t.load_captcha();
            });
        }),
        (t.prototype.load_captcha = function () {
          this.initialize() || this.load_captcha_when_ready();
          var t = this.captcha_api();
          null === this.captcha
            ? (this.captcha = t.render(this.element, { sitekey: this.sitekey }))
            : t.reset(this.captcha);
        }),
        (t.prototype.get_captcha = function () {
          return this.captcha_api().getResponse(this.captcha);
        }),
        (t.prototype.captcha_api = function () {
          if ("undefined" == typeof grecaptcha)
            throw Error("Captcha cannot be loaded.");
          return grecaptcha;
        }),
        t
      );
    })(),
    nt = (function () {
      function t(t) {
        (this.container = t),
          (this.$error_el = this.container.find(".ErrorMessage")),
          (this.$success_el = this.container.find(".SuccessMessage")),
          (this.captcha_field = this.container.find(".CaptchaField")[0]),
          (this.captcha = new et(
            this.captcha_field,
            DYNALIST.RECAPTCHA_SITEKEY,
          )),
          (this.working = !1),
          (this.network = new J(!0));
      }
      return (
        (t.prototype.start_working = function () {
          (this.working = !0), this.container.addClass("loading");
        }),
        (t.prototype.end_working = function () {
          (this.working = !1), this.container.removeClass("loading");
        }),
        (t.prototype.show_response_error_message = function (t, e) {
          var n = e;
          t && t._msg && (n = t._msg), this.show_error_message(n);
        }),
        (t.prototype.show_error_message = function (t) {
          t ? this.$error_el.text(t).show() : this.$error_el.text("").hide();
        }),
        (t.prototype.show_success_message = function (t) {
          t
            ? this.$success_el.text(t).show()
            : this.$success_el.text("").hide();
        }),
        (t.prototype.clear_messages = function () {
          this.show_success_message(""), this.show_error_message("");
        }),
        (t.prototype.try_get_captcha = function () {
          try {
            return this.captcha.get_captcha();
          } catch (t) {}
          return null;
        }),
        (t.prototype.try_load_captcha = function () {
          try {
            this.captcha.load_captcha();
          } catch (t) {
            this.show_error_message(
              "Sorry, we can't load the captcha, possibly because it's not available in your country. Please try again later.",
            );
          }
        }),
        (t.prototype.api_enqueue = function (t, e, n, o) {
          var i = this;
          this.clear_messages(), this.start_working();
          var r = new Zousan();
          return (
            this.network.enqueue(
              t,
              e,
              function (t) {
                i.end_working(), r.resolve(t);
              },
              function (t) {
                i.end_working(),
                  t && t._captcha && i.try_load_captcha(),
                  i.show_response_error_message(t, n),
                  r.reject(t);
              },
              o,
            ),
            r
          );
        }),
        (t.prototype.api_login = function (t, e, n) {
          return this.api_enqueue(
            i,
            { email: t, password: e, captcha: n },
            "Failed to login.",
          );
        }),
        (t.prototype.api_google_login = function (t, e) {
          return this.api_enqueue(
            d,
            { google_id_token: t, captcha: e },
            "Something went wrong with Google sign-in.",
          );
        }),
        (t.prototype.api_apple_login = function (t, e, n) {
          return this.api_enqueue(
            g,
            { apple_id_token: t, apple_auth_code: e, captcha: n },
            "Something went wrong with Apple sign-in.",
          );
        }),
        (t.prototype.api_login_request_create = function (t) {
          return this.api_enqueue(u, { source: t }, "Failed to request login.");
        }),
        (t.prototype.api_login_request_login = function (t, e) {
          return this.api_enqueue(
            l,
            { token: t, password: e },
            "Failed to login.",
          );
        }),
        (t.prototype.api_signup = function (t, e, n, o, i) {
          return this.api_enqueue(
            s,
            { name: t, email: e, password: n, copy_document_id: o, captcha: i },
            "Failed to signup.",
          );
        }),
        (t.prototype.api_google_signup = function (t, e) {
          return this.api_enqueue(
            s,
            { google_id_token: t, captcha: e },
            "Failed to signup.",
          );
        }),
        (t.prototype.api_apple_signup = function (t, e, n, o) {
          return this.api_enqueue(
            s,
            { apple_id_token: t, apple_auth_code: e, name: n, captcha: o },
            "Failed to signup.",
          );
        }),
        (t.prototype.api_link_google = function (t) {
          return this.api_enqueue(
            y,
            { google_id_token: t },
            "Something went wrong with linking your Google account.",
          );
        }),
        (t.prototype.api_forgot_password = function (t, e) {
          return this.api_enqueue(
            p,
            { email: t, captcha: e },
            "Failed to reset your password due to network issues, please try again.",
          );
        }),
        (t.prototype.api_reset_password = function (t, e) {
          return this.api_enqueue(
            a,
            { code: t, password: e },
            "Failed to reset your password due to network issues, please try again.",
          );
        }),
        (t.prototype.api_import_workflowy = function (t, e) {
          return this.api_enqueue(
            f,
            { email: t, password: e },
            "Failed to import from Workflowy.",
            { timeout: 18e5 },
          );
        }),
        (t.prototype.api_send_feedback = function (t, e) {
          return this.api_enqueue(
            h,
            { email: t, content: e },
            "Failed to send feedback.",
          );
        }),
        t
      );
    })(),
    ot = (function (i) {
      function t(t, e, n) {
        var o = i.call(this, t) || this;
        return (
          (o.link = o.container.find(".js-signup")),
          (o.success_callback = e),
          (o.document_id_to_copy = n),
          (o.name_field = o.container.find(".NameField")),
          (o.email_field = o.container.find(".EmailField")),
          (o.password_field = o.container.find(".PasswordField")),
          o.link.on("click", function (t) {
            t.preventDefault(), o.attempt_signup();
          }),
          o.password_field.on("keydown", function (t) {
            t.keyCode === r && o.attempt_signup();
          }),
          o
        );
      }
      return (
        B(t, i),
        (t.prototype.attempt_signup = function () {
          var t = this;
          if (!this.working) {
            var e = this.name_field.val(),
              n = this.email_field.val(),
              o = this.password_field.val(),
              i = this.try_get_captcha();
            this.api_signup(e, n, o, this.document_id_to_copy, i).then(
              function () {
                t.container
                  .find(
                    ".signin-btn-container, .login-method-divider, .NameField, .EmailField, .PasswordField, .CaptchaField, .SignupLegalDisclaimer",
                  )
                  .hide(),
                  t.show_success_message(
                    "You're in! We've sent an account activation email to " +
                      n +
                      ".",
                  ),
                  t.link.hide(),
                  t.success_callback && t.success_callback();
              },
            );
          }
        }),
        t
      );
    })(nt);
  -1 !== navigator.appVersion.indexOf("Win") ||
    -1 !== navigator.appVersion.indexOf("Mac") ||
    -1 !== navigator.appVersion.indexOf("X11") ||
    navigator.appVersion.indexOf("Linux");
  var it = (function t() {
    return navigator.userAgent || navigator.vendor || window.opera;
  })();
  /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(
    it,
  ) ||
    /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(
      it.substr(0, 4),
    ),
    ("MacIntel" === navigator.platform &&
      navigator.maxTouchPoints &&
      2 < navigator.maxTouchPoints) ||
      (/iPad|iPhone|iPod/.test(it) && window.MSStream),
    document.documentElement.style,
    it.toLowerCase().indexOf("firefox"),
    it.toLowerCase().indexOf("edge"),
    -1 !== it.indexOf("Safari") && it.indexOf("Chrome");
  (function t() {
    return "ontouchstart" in window || navigator.maxTouchPoints;
  })();
  var rt = {};
  var st = "gLogin",
    at = (function () {
      function t() {
        var t = this;
        (this.google_loaded = Q()),
          (this.google_error = null),
          this.initialize(),
          window[st].push(function () {
            t.init();
          });
      }
      return (
        (t.prototype.initialize = function () {
          return (
            !!window[st] ||
            ((window[st] = Q()),
            X("https://apis.google.com/js/api:client.js?onload=" + st),
            !1)
          );
        }),
        (t.prototype.init = function () {
          var e = this;
          gapi.load("auth2", function () {
            gapi.auth2
              .init({
                client_id: DYNALIST.GOOGLE_LOGIN_PUBLICKEY,
                cookiepolicy: "single_host_origin",
              })
              .then(
                function () {
                  e.google_loaded();
                },
                function (t) {
                  "idpiframe_initialization_failed" === t.error &&
                  t.details.match(/Access is denied/)
                    ? (e.google_error =
                        'Google sign-in doesn\'t work if you turn on "Block third Party cookies and site data". The setting can be found in Settings > Show advanced settings > Privacy > Content settings.')
                    : ((e.google_error =
                        "Google sign-in doesn't seem to be working. Error: " +
                        t.error),
                      console.error(t)),
                    e.google_loaded();
                },
              );
          });
        }),
        (t.prototype.on_ready = function (t) {
          this.google_loaded.push(t);
        }),
        (t.prototype.get_error = function () {
          return this.google_error;
        }),
        (t.prototype.login = function (e, t) {
          gapi.auth2
            .getAuthInstance()
            .signIn({ scope: "profile email", prompt: "select_account" })
            .then(function (t) {
              e(t);
            }, t);
        }),
        t
      );
    })(),
    ct = (function (n) {
      function t(t) {
        var e = n.call(this, t) || this;
        return (
          (e.$button = e.container.find(".js-google-signin")),
          e.$button.on("click", function () {
            e.attempt_google_login();
          }),
          e
        );
      }
      return B(t, n), t;
    })(nt),
    ut = (function (n) {
      function t(t) {
        var e = n.call(this, t) || this;
        return (e.google_login = new at()), e;
      }
      return (
        B(t, n),
        (t.prototype.attempt_google_login = function () {
          var i = this;
          this.google_login.on_ready(function () {
            var t = i.google_login.get_error();
            t
              ? i.show_error_message(t)
              : i.google_login.login(
                  function (t) {
                    var e = t.getAuthResponse(),
                      n = t.getBasicProfile(),
                      o = i.try_get_captcha();
                    i.login_success({
                      id_token: e.id_token,
                      email: n.getEmail(),
                      name: n.getName(),
                      captcha: o,
                    });
                  },
                  function (t) {
                    var e = "Something went wrong with Google sign-in :(";
                    "popup_blocked_by_browser" === t.error &&
                      (e =
                        "The Google Login popup was blocked by the browser. Please check your browser settings and enable popups for the Dynalist website."),
                      "popup_closed_by_user" === t.error
                        ? (e = "The Google Login popup was closed.")
                        : "access_denied" === t.error &&
                          (e = "Access to your Google account was denied."),
                      i.show_error_message(e);
                  },
                );
          });
        }),
        t
      );
    })(ct),
    lt =
      ((function (e) {
        function t(t) {
          return e.call(this, t) || this;
        }
        B(t, e),
          (t.prototype.login_success = function (t) {
            var e = this;
            this.api_google_login(t.id_token, t.captcha).then(function () {
              e.start_working(), setTimeout(K, 300);
            });
          });
      })(ut),
      (function (e) {
        function t(t) {
          return e.call(this, t) || this;
        }
        return (
          B(t, e),
          (t.prototype.login_success = function (t) {
            var e = this;
            this.api_google_signup(t.id_token, t.captcha).then(function () {
              e.start_working(), setTimeout(K, 300);
            });
          }),
          t
        );
      })(ut)),
    pt =
      ((function (e) {
        function t(t) {
          return e.call(this, t) || this;
        }
        B(t, e),
          (t.prototype.login_success = function (t) {
            var e = this;
            this.api_link_google(t.id_token).then(function () {
              e.show_success_message(
                "Successfully linked your Google account! You can close this page now.",
              );
            });
          });
      })(ut),
      (function (a) {
        function t(t, e, n, o) {
          var i = a.call(this, t) || this;
          if (
            ((i.env = e),
            (i.success_callback = n),
            e.is("mobile") && e.is("ios"))
          ) {
            var r = t.get(0),
              s = r.find(".js-apple-signin");
            if (!s)
              s = r
                .find(".js-google-signin")
                .parentElement.createEl(
                  "div",
                  { cls: "signin-btn js-apple-signin" },
                  function (t) {
                    t.createEl("span", {
                      cls: "signin-icon apple-signin-icon",
                    }),
                      t.createEl("span", {
                        cls: "signin-button-text",
                        text: o,
                      });
                  },
                );
            s.addEventListener("click", function () {
              return i.attempt_apple_login();
            });
          }
          return i;
        }
        return (
          B(t, a),
          (t.prototype.attempt_apple_login = function () {
            var n = this,
              o = this.env;
            this.clear_messages(),
              o.attempt_apple_login(
                function (t) {
                  var e = t.fullName.givenName;
                  e
                    ? (o.set_env_data_nosave("APPLE_NAME", e),
                      o.save_env_data())
                    : (e = o.get_env_data("APPLE_NAME", "")),
                    n.onAppleLoginSuccess(
                      t.identityToken,
                      t.authorizationCode,
                      e,
                    );
                },
                function (t) {
                  n.show_error_message(
                    "Something went wrong with Apple sign-in :(",
                  );
                },
              );
          }),
          (t.prototype.attempt_google_login = function () {
            var n = this;
            this.env.attempt_googleplus_login(
              DYNALIST.GOOGLE_LOGIN_PUBLICKEY,
              function (t) {
                var e = n.try_get_captcha();
                n.login_success({
                  id_token: t.idToken,
                  email: t.email,
                  name: t.displayName,
                  captcha: e,
                });
              },
              function () {
                return n.show_error_message(
                  "Something went wrong with Google sign-in :(",
                );
              },
            );
          }),
          t
        );
      })(ct));
  (function (r) {
    function t(t, e, n, o) {
      var i = r.call(this, t, e, n, "Sign in with Apple") || this;
      return (i.loginManager = o), i;
    }
    B(t, r),
      (t.prototype.login_success = function (t) {
        var e = this;
        this.api_google_login(t.id_token, t.captcha).then(function (t) {
          e.success_callback(t.session);
        });
      }),
      (t.prototype.onAppleLoginSuccess = function (t, e, n) {
        var o = this,
          i = this.try_get_captcha();
        this.api_apple_login(t, e, i).then(function (t) {
          o.success_callback(t.session);
        });
      });
  })(pt),
    (function (r) {
      function t(t, e, n, o) {
        var i = r.call(this, t, e, n, "Sign up with Apple") || this;
        return (i.signupManager = o), i;
      }
      B(t, r),
        (t.prototype.login_success = function (t) {
          var e = this;
          this.api_google_signup(t.id_token, t.captcha).then(function (t) {
            e.success_callback(t.session);
          });
        }),
        (t.prototype.onAppleLoginSuccess = function (t, e, n) {
          var o = this,
            i = this.try_get_captcha();
          this.api_apple_signup(
            t,
            e,
            n || this.signupManager.name_field.val(),
            i,
          ).then(function (t) {
            o.success_callback(t.session);
          });
        });
    })(pt);
  $(document).ready(function () {
    var t = (function t(e) {
      return void 0 === rt[e] && (rt[e] = $(e)), rt[e];
    })(".SignupContainer-form");
    new ot(t, function () {
      return $(window).trigger("resize");
    }),
      new lt(t);
    var e = (function t() {
      var e = Date.now(),
        n = Math.abs(e - 1538352e6);
      return 122 + Math.ceil(n / 2628e6) - 2;
    })();
    fishAll(".weekly-update-number").forEach(function (t) {
      return t.setText(e.toString());
    });
    new n();
  });
})();
